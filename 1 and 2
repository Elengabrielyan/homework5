<!DOCTYPE html>
<canvas id="mycanvas" width="630" height="630"> </canvas>
<script>
const canvas= document.getElementById("mycanvas");
const context= canvas.getContext("2d");
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;
const rand = function(num){
	return Math.floor(Math.random()*num+1);
};
const randDelta = function(val){
	return Math.floor(Math.random()*val+20);
};
const Delta = [6,-6];
const colorar = ["#540032", "#820333", "#C9283E", "#F0433A"]
const createpoint = function(count, canvaswidth, canvasheight){
	a=[];
		const f= randDelta(40);
	const recursion= function(val){
	
		if(val<=0){
			return "";
		}
		a.push({
			width: 2.9,
			height: 2.9,
			x: rand(canvaswidth-2.9),
			y: rand(canvasheight-2.9),
			xDelta: Delta[rand(2)-1],
			yDelta: Delta[rand(2)-1],
			color: colorar[rand(5)-1]
		});

		recursion(val-1);
	};
	recursion(count);
	return a;
};
	const point = createpoint(5,canvas.width,canvas.height);
	const recDraw = function(){
		context.clearRect(0,0,canvas.width,canvas.height);
		const every = function(a,count){
		if(count>= a.length){
			return;
		}
		context.fillStyle = a[count].color;
		context.fillRect(a[count].x,a[count].y,a[count].width,a[count].height);

	every(a,count+1);
};
	every(point,0);
};
const update = function() {
	const ar = function(b,i) {
		if(i === b.length){
			return "";
		}
		if(b[i].x+b[i].width >=canvas.width || b[i].x < 0 ){
			b[i].xDelta=-b[i].xDelta;
		}
		if(b[i].y+b[i].height >=canvas.height || b[i].y < 0 ){
			b[i].yDelta=-b[i].yDelta;
		}
		b[i].x += b[i].xDelta;
		b[i].y += b[i].yDelta;
		ar(b,i+1);
	};
	ar(point,0);
};

const loop =  function() {
	recDraw();
	update();

	requestAnimationFrame(loop);
};
loop();
//recDraw();

createpoint(5,canvas.width,canvas.height)
console.log(a);

</script>
</html>
